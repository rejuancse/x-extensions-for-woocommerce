jQuery(document).ready(function(e){var n=0,a=e(".xwoo-block").length;function t(n,a=!1){n=JSON.parse(n);var t='<div class="xwoo-modal-wrapper">  <div class="xwoo-modal-content"> <div class="xwoo-modal-wrapper-head"><span id="xwoo_modal_title">Message</span><a href="javascript:;" class="xwoo-modal-close">&times;</a>';return a&&(t+='</div><span class="xwoo-print-button button xwoo-edit-btn">print</span>'),t+='<div class="xwoo-modal-content-inner"><div id="xwoo_modal_message"></div></div></div></div>',0==e(".xwoo-modal-wrapper").length&&(e("body").append(t),n.redirect&&0==e("#xwoo_redirect_url").length&&e("body").append('<input type="hidden" id="xwoo_redirect_url" value="'+n.redirect+'" />')),1==n.success?(n.message&&e(".xwoo-modal-wrapper #xwoo_modal_message").html(n.message),n.title&&e(".xwoo-modal-wrapper #xwoo_modal_title").html(n.title),e(".xwoo-modal-wrapper").css({display:"block"}),e("#xwoofrontenddata").length>0&&e("#xwoofrontenddata")[0].reset(),!0):(e(".xwoo-modal-wrapper #xwoo_modal_message").html(n.message),e(".xwoo-modal-wrapper").css({display:"block"}),!1)}function o(n){e(n).length>1?e(n).show():(e(n).hide(),".removeCampaignRewards"==n&&e(".reward_group").show(),".removecampaignupdate"==n&&e("#campaign_update_field").show()),e(n).first().hide()}function i(){var n,a=e("#xwoo-dashboard-form").serializeArray();return e.ajax({async:!1,url:xwoo_ajax_object.ajax_url,type:"POST",data:a,success:function(e,a,o){t(e),n=e},error:function(e,n,a){t({success:0,message:"Error sending data"})}}),e(".xwoo-content input,.xwoo-content textarea,.xwoo-content select").attr("disabled","disabled").css("border","none"),e(".xwoo-cancel-btn").hide(),e("#xwoo-edit").delay(100).fadeIn("slow"),n}0!=a&&(n=a),e.fn.createNewForm=function(n){return this.each(function(){e(this).find("input,textarea,select").each(function(){var a=e(this);a.attr("name",this.name.replace(/\d/,n)),a.val("")})})},e(".add-new").on("click",function(a){var t=e(".xwoo-block").last().clone();t.createNewForm(n),e("#xwoo-clone .add-new").before(e(t)),n+=1}),e(document).on("click",".remove-button",function(n){e(".xwoo-block").length>1&&e(this).parent(".xwoo-block").remove()}),e("#xwoo_form_start_date, #xwoo_form_end_date").datepicker({dateFormat:"dd-mm-yy"}),e(".xwoo_donate_button").on("click",function(n){e(".xwoo_donate_amount_field").val()?e(".xwoo-tooltip-empty").css({visibility:"hidden"}):(n.preventDefault(),e(".xwoo-tooltip-empty").css({visibility:"visible"}))}),e(".xwoo-pie-chart").easyPieChart({barColor:"#1adc68",trackColor:"#f5f5f5",scaleColor:!1,lineWidth:5}),e(".datepickers_1").datepicker({dateFormat:"yy-mm-dd"}),e(".datepickers_2").datepicker({dateFormat:"yy-mm-dd"}),e("#xwoofrontenddata").submit(function(){tinyMCE.triggerSave();var n=e(this).serialize();return e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:n,success:function(n){JSON.parse(n).success||"undefined"!=typeof grecaptcha&&0!==e(".g-recaptcha").length&&grecaptcha.reset(),t(n)},error:function(e,n,a){t({success:0,message:"Error sending data"})}}),!1}),e(document).on("click",".xwoo-print-button",function(e){window.print()}),window.xwoo_modal=t,function(n){var a=!0,t=wp.media.editor.send.attachment;e("body").on("click",n,function(n){var o="#"+e(this).attr("id"),i=e(o);return a=!0,wp.media.editor.send.attachment=function(n,i){if(!a)return t.apply(o,[n,i]);var r=i.url;e(".xwoo-form-image-url").val(r),e(".xwoo-form-image-id").val(i.id)},wp.media.editor.open(i),!1})}(".xwoo-image-upload"),e(document).on("click",".add_media",function(){_custom_media=!1}),e(".xwooShowLogin").on("click",function(n){n.preventDefault(),e(".xwoo_login_form_div").slideToggle()}),e("#addreward").on("click",function(n){n.preventDefault();var a=e(".reward_group").html();e("#rewards_addon_fields").append(a).hide().show("slow"),e("#rewards_addon_fields .campaign_rewards_field_copy:last-child").find("input,textarea,select").each(function(){"remove_rewards"!=e(this).attr("name")&&"button"!=e(this).attr("type")&&e(this).val("")}),o(".removeCampaignRewards")}),e("body").on("click",".removeCampaignRewards",function(n){n.preventDefault();const a=e(this).closest("#reward_options").offset().top;e(this).closest(".campaign_rewards_field_copy").html(""),e("html, body").animate({scrollTop:a-100},100),o(".removeCampaignRewards")}),o(".removeCampaignRewards"),e("#addcampaignupdate").on("click",function(n){n.preventDefault();var a=e("#campaign_update_field").html();e("#campaign_update_addon_field").append(a),o(".removecampaignupdate")}),e("body").on("click",".removecampaignupdate",function(n){n.preventDefault(),e(this).closest(".campaign_update_field_copy").html("").hide(),o(".removecampaignupdate")}),o(".removecampaignupdate"),e("#xwoo_active_edit_form").on("click",function(n){n.preventDefault(),e("#xwoo_update_display_wrapper").hide(),e("#xwoo_update_form_wrapper").fadeIn("slow")}),e("#xwoo-edit").on("click",function(n){n.preventDefault(),e("#xwoo-edit").hide(),e(".xwoo-content input,.xwoo-content textarea,.xwoo-content select").not('.xwoo-content input[name="username"]').removeAttr("disabled").css("border","1px solid #dfe1e5"),e(".xwoo-save-btn").delay(100).fadeIn("slow"),e(".xwoo-cancel-btn").delay(100).fadeIn("slow"),e("button.xwoo-image-upload").show()}),e(".xwoo-cancel-btn").on("click",function(n){n.preventDefault(),e(".xwoo-content input,.xwoo-content textarea,.xwoo-content select").attr("disabled","disabled").css("border","none"),e(".xwoo-cancel-btn").hide(),e("#xwoo-dashboard-save").hide(),e("#xwoo-profile-save").hide(),e("#xwoo-contact-save").hide(),e("button.xwoo-image-upload").hide(),e("#xwoo-edit").delay(100).fadeIn("slow")}),e("#xwoo-dashboard-save").on("click",function(n){n.preventDefault();e("#xwoo-dashboard-form").serializeArray();i()}),e("#xwoo-profile-save").on("click",function(e){e.preventDefault(),i()}),e("#xwoo-contact-save").on("click",function(e){e.preventDefault(),i()}),e("#xwoo-password-save").on("click",function(e){e.preventDefault(),i()}),e("#xwoo-update-save").on("click",function(e){e.preventDefault(),t(i())}),e(".xwoo-tabs-menu a").on("click",function(n){n.preventDefault(),e(".xwoo-tabs-menu li").removeClass("xwoo-current"),e(this).parent().addClass("xwoo-current");var a=e(this).attr("href");return e(".xwoo-tab-content").hide(),e(a).fadeIn(),!1}),e(e(".xwoo-current a").attr("href")).fadeIn(),e(".xwoo-fund-modal-btn").on("click",function(n){n.preventDefault();var a=e(this).data("author");e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:{action:"xwoo_bio_action",author:a},success:function(e){t(e)},error:function(e,n,a){t({success:0,message:"Error"})}})}),e(document).on("click",".xwoo-modal-close",function(){e(".xwoo-modal-wrapper").css({display:"none"}),e("#xwoo_redirect_url").length>0&&(location.href=e("#xwoo_redirect_url").val())}),e('input[name="xwoo_donate_amount_field"]').on("blur change paste",function(){var n=e(this).val(),a=e(this).data("min-price"),t=e(this).data("max-price");n<a?a&&(e(this).val(a),e(".xwoo-tooltip-min").css({visibility:"visible"})):t<n?t&&(e(this).val(t),e(".xwoo-tooltip-max").css({visibility:"visible"})):e(".xwoo-tooltip-min,.xwoo-tooltip-max").css({visibility:"hidden"})}),e(document).on("click","#love_this_campaign",function(){var n=e(this).data("campaign-id");e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:{action:"love_campaign_action",campaign_id:n},success:function(n){1==(n=JSON.parse(n)).success&&e("#campaign_loved_html").html(n.return_html)},error:function(e,n,a){t({success:0,message:"Error"})}})}),e(document).on("click","#remove_from_love_campaign",function(){var n=e(this).data("campaign-id");e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:{action:"remove_love_campaign_action",campaign_id:n},success:function(n){n=JSON.parse(n),e("#campaign_loved_html").html(n.return_html)},error:function(e,n,a){t({success:0,message:"Error"})}})}),e(document).on("click","#user-registration-btn",function(n){n.preventDefault();var a=e(this).closest("form").serialize();e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:a,success:function(e){t(e),(e=JSON.parse(e)).success?location.href=e.redirect:"undefined"!=typeof grecaptcha&&grecaptcha.reset()},error:function(e,n,a){t({success:0,message:"Error"})}})});var r=e("input[name=xwoo-form-image-url]").val();""!=r&&e("#xwoo-image-show").html('<img width="150" src="'+r+'" />'),e(document).on("click",".media-button-insert",function(n){var a=e("input[name=xwoo-form-image-url]").val();e(".profile-form-img").length>0?e(".profile-form-img").attr("src",a):""!=a&&e("#xwoo-image-show").html('<img width="150" src="'+a+'" />')}),e("body.woocommerce-checkout").length>=1&&e("#billing_email").length<1&&e("#customer_details").css({display:"none"}),e("body").on("click",".xwoo-image-upload-btn",function(n){n.preventDefault();var a=e(this),t=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(n){var o=t.state().get("selection").first(),i=o.toJSON().url;o=o.toJSON().id,e(a).parent().find(".xwoo_rewards_image_field").val(o),e(a).parent().find(".xwoo_rewards_image_field_url").val(i)})}),e("body").on("click",".xwoo-image-remove",function(n){var a=e(this);e(a).parent().find("xwoo_rewards_image_field_url").val(""),e(a).parent().find(".xwoo_rewards_image_field").val("")}),e("body").on("click",".price-value-change",function(n){n.preventDefault();var a=e(this).data("reward-amount");e("html, body").animate({scrollTop:0},600,function(){setTimeout(function(){e(".xwoo_donate_amount_field").addClass("xwoosplash")},100),setTimeout(function(){e(".xwoo_donate_amount_field").val(a),e(".xwoo_donate_amount_field").removeClass("xwoosplash")},1e3)})}),e(document).on("click","table.reward_table_dashboard tr",function(n){e(this).find(".reward_description").slideToggle()}),e(document).on("click",".xwoo-order-view",function(n){n.preventDefault();var a=e(this).data("orderid");e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:{action:"xwoo_order_action",orderid:a},success:function(e){t(e,!0)},error:function(e,n,a){t({success:0,message:"Error"})}})}),e(document).on("click",".xwoo-icon-embed",function(n){n.preventDefault();var a=e(this).data("postid");e.ajax({type:"POST",url:xwoo_ajax_object.ajax_url,data:{action:"xwoo_embed_action",postid:a},success:function(e){t(e)},error:function(e,n,a){t({success:0,message:"Error"})}})}),e(document).on("click","ul.xwoo_predefined_pledge_amount li a",function(){var n=e(this).attr("data-predefined-price");e(".xwoo_donate_amount_field").val(n)}),e('select[name="xwoo-form-type"]').on("change",function(){"never_end"==e(this).val()?(e("#xwoo_form_start_date").parents(".xwoo-single").hide(),e("#xwoo_form_end_date").parents(".xwoo-single").hide()):(e("#xwoo_form_start_date").parents(".xwoo-single").show(),e("#xwoo_form_end_date").parents(".xwoo-single").show())})});