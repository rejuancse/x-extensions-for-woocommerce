/**
 * frontend.js
 *
 * @author Rejuan Ahamed
 * @package XEWC WooCommerce Quick View
 * @version 1.0.0
 */
 jQuery(document).ready(function(a){"use strict";if("undefined"!=typeof xewc_qv){var b=a(document).find("#xewc-quick-view-modal"),c=b.find(".xewc-quick-view-overlay"),d=b.find("#xewc-quick-view-content"),e=b.find("#xewc-quick-view-close"),f=b.find(".xewc-wcqv-wrapper"),g=f.width(),h=f.height(),i=function(){var b=a(window).width(),c=a(window).height(),d=b-60>g?g:b-60,e=c-120>h?h:c-120;f.css({left:b/2-d/2,top:c/2-e/2,width:d+"px",height:e+"px"})};a.fn.xewc_quick_view=function(){a(document).off("click",".xewc-wcqv-button").on("click",".xewc-wcqv-button",function(c){c.preventDefault();var d=a(this),e=d.data("product_id"),f=!1;"undefined"!=typeof xewc_qv.loader&&(f=!0,d.block({message:null,overlayCSS:{background:"#fff url("+xewc_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),!b.hasClass("loading")&&b.addClass("loading"),a(document).trigger("qv_loading")),j(d,e,f)})};var j=function(c,e,f){a.ajax({url:xewc_qv.ajaxurl,data:{action:"xewc_load_product_quick_view",product_id:e,lang:xewc_qv.lang,context:"frontend"},dataType:"json",type:"POST",success:function(e){d.html(e.html);var g=d.find(".variations_form");g.each(function(){a(this).wc_variation_form(),"undefined"==typeof a.fn.xewc_wccl?"undefined"!=typeof a.xewc_wccl&&e.prod_attr&&a.xewc_wccl(e.prod_attr):a(this).xewc_wccl()}),g.trigger("check_variations"),g.trigger("reset_image"),"undefined"!=typeof a.fn.wc_product_gallery&&d.find(".woocommerce-product-gallery").each(function(){a(this).wc_product_gallery()}),b.hasClass("open")||(b.removeClass("loading").addClass("open"),f&&c.unblock()),a(document).trigger("qv_loader_stop")}})},k=function(){c.on("click",function(){f()}),a(document).keyup(function(a){27===a.keyCode&&f()}),e.on("click",function(a){a.preventDefault(),f()});var f=function(){b.removeClass("open").removeClass("loading"),setTimeout(function(){d.html("")},1e3)}};k(),i(),a(window).on("resize",i),a.fn.xewc_quick_view(),a(document).on("xewc_infs_adding_elem xewc-wcan-ajax-filtered",function(){a.fn.xewc_quick_view()})}});